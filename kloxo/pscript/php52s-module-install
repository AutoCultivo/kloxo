#!/bin/sh

if [ "$#" == 0 ] ; then
	echo
	echo " ---------------------------------------------------------------------------"
	echo "  format: sh $0 <module_name>"
	echo " ---------------------------------------------------------------------------"
	echo " - Because php52s using php 5.2.x, better use the same version"
	echo "   Example: echo 'sh $0 php52-xcache'"
	echo
	echo " - Certain modules need 'extension=/opt/php52s/lib/xxx.so'"
	echo "   rather than 'extension=xxx.so' inside their ini file on"
	echo "   '/opt/php52s/etc/php.d')"
	echo
	echo " - Check '/opt/php52s/error.log' after testing with 'php52s -m'"
	echo
	exit;
fi

yum install yum-utils -y

rm -rf /tmp/php52s-module/* >/dev/null 2>$1

mkdir -p /tmp/php52s-module >/dev/null 2>$1

cd /tmp/php52s-module >/dev/null 2>$1

yumdownloader $1

rpm2cpio *.rpm | cpio -idmv

cp -rf /tmp/php52s-module/usr/lib/php/modules/* /opt/php52s/lib >/dev/null 2>$1
cp -rf /tmp/php52s-module/usr/lib64/php/modules/* /opt/php52s/lib >/dev/null 2>$1

cp -rf /tmp/php52s-module/usr/lib/php/zend/* /opt/php52s/zend >/dev/null 2>$1
cp -rf /tmp/php52s-module/usr/lib64/php/zend/* /opt/php52s/zend >/dev/null 2>$1

cp -rf /tmp/php52s-module/etc/php.d/* /opt/php52s/etc/php.d >/dev/null 2>$1




